---
title: "Getting Started with CloudML"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, eval=FALSE)
```

```{css, echo=FALSE}
.screenshot {
  margin-top: 12px;
  margin-bottom: 12px;
  width: 80%;
  border: solid 1px #cccccc;
}

#cloudml-prerequisites ol {
  margin-top: 15px;
  padding-left: 25px;
}

#cloudml-prerequisites ol>li {
  margin-bottom: 20px;
}
#cloudml-prerequisites ul>li {
  margin-bottom: 8px;
}
.list-footer {
  margin-top: 10px;
}
```

## Overview

CloudML enables you to train machine learning models at scale by running TensorFlow training applications in the cloud. Cloud ML Engine manages the computing resources that your training job needs to run, so you can focus more on your model than on hardware configuration or resource management. Your use of the training service is bounded by pricing and resource quota policy, but within those bounds, you have access to powerful scalable computing.

CloudML is designed to run your R TensorFlow training scripts with minimal alteration. This article describes the prerequisites for submitting training jobs to CloudML along with the basic workflow used for training.

## Prerequisites

Before you can begin training models with CloudML you need to have a **Google Cloud Account**. If you don't already have an account you can create one at <https://console.cloud.google.com>.

Next, you need to download and install the **Google Cloud SDK**, a set of utilties that enable you to interact with your Google Cloud account from the terminal or from R when using the cloudml package. The instructions for doing this vary by platform:

  - [Linux Installation](https://cloud.google.com/sdk/downloads#linux)
  - [Mac OS X Installation](https://cloud.google.com/sdk/downloads#mac)
  - [Windows Installation](https://cloud.google.com/sdk/downloads#windows)
  
A couple of important notes regarding Google Cloud SDK setup:

1) You should accept the default installation location for the SDK (e.g. ~/google-cloud-sdk) so that the cloudml R package can locate the SDK.

2) As part of SDK setup you should have run the `gcloud init` command. This command authenticates and conencts your local workstation with your Google Cloud account. If you haven't done this yet you should be sure to do so before proceeding.
  
## Training on CloudML

To train models on CloudML, first work on them locally (perhaps with a smaller sample of your dataset) until your training script is working correctly. Then, call the `cloudml_train()` function, specifying the R script to execute for training:

```{r}
job <- cloudml_train("train.R")
```

Note that all of the files within the directory that contains your training script will be bundled up and sent along with the script.

The very first time you train a new project will take a fair amount of time (in the neighborhood of 20 minutes). This is because a large number of R packages are installed (which requires compilation from source). The good news is that all of these package compliations are cached, so subsequent training runs will not have this installation overhead.





